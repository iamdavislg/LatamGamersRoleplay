<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GTA LGRP - Roleplay</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<header class="site-header">
  <nav class="nav">
    <div class="logo">GTA <span class="accent">LGRP</span></div>
    <ul class="menu">
      <li>PCU</li>
      <li><a href="https://discord.gg/FF5SK3eXQw" target="_blank">DISCORD</a></li>
      <li>Login</li>
      <li>Novedades</li>
    </ul>
    <div class="lang">ESP</div>
  </nav>
</header>

<main class="hero">
  <div class="overlay"></div>
  <div class="hero-inner">
    <h1 class="big-title">GTA <span class="lt">LGRP</span></h1>
    <p class="subtitle">GTA LGRP es una comunidad masiva de GTA SA Roleplay, donde podrás jugar con +15 usuarios en línea.</p>

    <div class="cta-wrap">
      <a id="playBtn" class="btn play" href="#" role="button">▶ JUGAR AHORA</a>
      <div class="online" id="onlineCounter">
        <span class="dot"></span> <span id="count">Cargando...</span> ONLINE
      </div>
    </div>
  </div>

  <div class="bullets">
    <div class="bullet b1"></div>
    <div class="bullet b2"></div>
    <div class="bullet b3"></div>
  </div>

  <div class="footer-hint">Desplázate para descubrir más ↓</div>
</main>

<section class="features">
  <div class="card">¡¡Apertura 2.0!!</div>
  <div class="card">Soporte 24/7</div>
  <div class="card">Eventos semanales</div>
</section>

<script>
async function getOnlinePlayers() {
    const ip = "144.217.19.104";
    const port = "7777";

    try {
        const response = await fetch(`https://api.open.mp/servers/${ip}/${port}`);
        const data = await response.json();

        if (data && data.players && data.players.length !== undefined) {
            document.getElementById("count").innerText = data.players.length;
        } else {
            document.getElementById("count").innerText = "0";
        }
    } catch (error) {
        document.getElementById("count").innerText = "0";
    }
}

// Llamar al cargar y actualizar cada 30 segundos
getOnlinePlayers();
setInterval(getOnlinePlayers, 30000);
</script>

</body>
</html>
